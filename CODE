using System;
using System.IO;

class Prelim1
{
    static void Main()
    {
        // ================================
        // Task 1: Driver Profile & Distance Validation
        // ================================

        // Task 1: Collect Driver Information
        // string: Used for driver names because it's designed for text data
        // nullable (string?): Allows checking for null values before processing
        Console.Write("Enter Driver's Full Name: ");
        string? driverName = null;
        // while loop: Continues until valid (non-empty) name is entered
        // Ensures data validation and prevents empty driver records
        while (string.IsNullOrWhiteSpace(driverName))
        {
            driverName = Console.ReadLine();
            if (string.IsNullOrWhiteSpace(driverName))
            {
                Console.Write("Driver name cannot be empty. Please enter Driver's Full Name: ");
            }
        }

        // decimal: Used for monetary values (budget) to ensure precise calculations
        // (avoids floating-point rounding errors common with double/float)
        decimal weeklyBudget = 0;
        // while (true) with break: Continues until valid budget amount is entered
        // TryParse safely attempts conversion without throwing exceptions
        while (true)
        {
            Console.Write("Enter Weekly Fuel Budget: ");
            string? budgetInput = Console.ReadLine();
            if (!string.IsNullOrWhiteSpace(budgetInput) && decimal.TryParse(budgetInput, out weeklyBudget))
            {
                break;
            }
            Console.WriteLine("❌ Invalid input. Please enter a valid decimal value for the budget.");
        }

        // double: Used for distance measurements (km) to support decimal precision
        // suitable for non-financial calculations where floating-point is acceptable
        double totalDistance = 0;

        // while loop with range validation: Ensures distance is between 1-5000 km
        // prevents unrealistic distance entries and maintains data integrity
        while (totalDistance < 1.0 || totalDistance > 5000.0)
        {
            Console.Write("Enter Total Distance Traveled this Week (1.0 - 5000.0 km): ");
            string? distanceInput = Console.ReadLine();
            if (!string.IsNullOrWhiteSpace(distanceInput) && double.TryParse(distanceInput, out totalDistance))
            {
                if (totalDistance < 1.0 || totalDistance > 5000.0)
                {
                    Console.WriteLine("❌ Invalid distance. Please enter a value between 1.0 and 5000.0.");
                }
            }
            else
            {
                Console.WriteLine("❌ Invalid input. Please enter a valid number.");
                totalDistance = 0;
            }
        }

        // ================================
        // Task 2: Track Fuel Expenses
        // ================================

        // decimal[]: Used 1D array to store 5 daily fuel expenses
        // arrays provide fixed-size indexed storage ideal for known, fixed data sets
        decimal[] fuelExpenses = new decimal[5];

        decimal totalFuelSpent = 0;

        // for loop: Ideal for known iteration count (5 days of expenses)
        // iterates exactly array.Length times, preventing index out of bounds errors
        for (int i = 0; i < fuelExpenses.Length; i++)
        {
            decimal expense = 0;
            while (true)
            {
                Console.Write($"Enter fuel expense for Day {i + 1}: ");
                string? expenseInput = Console.ReadLine();
                if (!string.IsNullOrWhiteSpace(expenseInput) && decimal.TryParse(expenseInput, out expense))
                {
                    break;
                }
                Console.WriteLine("❌ Invalid input. Please enter a valid decimal value.");
            }
            fuelExpenses[i] = expense;

            // Accumulator pattern: Maintains running total of all expenses
            // needed for average and efficiency calculations later
            totalFuelSpent += fuelExpenses[i];
        }

        // ================================
        // Task 3: Performance Analysis
        // ================================
        // Calculate metrics to evaluate driver efficiency and budget compliance
        
        // decimal: Maintains precision for average expense (money calculation)
        decimal averageDailyExpense = totalFuelSpent / fuelExpenses.Length;

        // Fuel Efficiency = Distance / Fuel Cost (km per unit currency spent)
        // Cast totalFuelSpent to double for mathematical calculation
        double fuelEfficiency = totalDistance / (double)totalFuelSpent;

        // string: Stores descriptive efficiency rating category
        string efficiencyRating;

        // Categorize efficiency: higher km per currency = better efficiency
        // Thresholds determined by industry standards for vehicle performance
        if (fuelEfficiency > 15)
        {
            efficiencyRating = "High Efficiency";
        }
        else if (fuelEfficiency >= 10)
        {
            efficiencyRating = "Standard Efficiency";
        }
        else
        {
            efficiencyRating = "Low Efficiency / Maintenance Required";
        }

        // bool: Stores true/false result for budget compliance check
        // simple boolean comparison for clear yes/no budget status
        bool underBudget = totalFuelSpent <= weeklyBudget;

        // ================================
        // Task 4: Audit Report
        // ================================

        try
        {
            Console.Clear();
        }
        catch (IOException)
        {
            // Console is not available, continue without clearing
        }
        Console.ForegroundColor = ConsoleColor.Cyan;
        Console.WriteLine("========================================");
        Console.WriteLine("   CODAC LOGISTICS AUDIT REPORT   ");
        Console.WriteLine("========================================");
        Console.ResetColor();

        Console.ForegroundColor = ConsoleColor.White;
        Console.WriteLine($"Driver Name: {driverName}");
        Console.WriteLine($"Total Distance Traveled: {totalDistance} km\n");
        Console.ResetColor();

        Console.ForegroundColor = ConsoleColor.Yellow;
        Console.WriteLine("Fuel Expenses Breakdown:");
        Console.ResetColor();
        // for loop: Iterates through array to display each day's expense
        // uses index i to match day number and access corresponding array element
        for (int i = 0; i < fuelExpenses.Length; i++)
        {
            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine($"Day {i + 1}: ₱{fuelExpenses[i]}");
            Console.ResetColor();
        }

        Console.ForegroundColor = ConsoleColor.Gray;
        Console.WriteLine("\n---------------------------------------");
        Console.ResetColor();

        Console.ForegroundColor = ConsoleColor.Magenta;
        Console.WriteLine($"Total Fuel Spent: ₱{totalFuelSpent}");
        Console.WriteLine($"Average Daily Expense: ₱{averageDailyExpense}");
        Console.ResetColor();

        // Color-coded efficiency rating: Provides visual feedback on performance
        // Green = good, Yellow = acceptable, Red = poor/needs attention
        Console.Write("Fuel Efficiency Rating: ");
        if (fuelEfficiency > 15)
        {
            Console.ForegroundColor = ConsoleColor.Green;
        }
        else if (fuelEfficiency >= 10)
        {
            Console.ForegroundColor = ConsoleColor.Yellow;
        }
        else
        {
            Console.ForegroundColor = ConsoleColor.Red;
        }
        Console.WriteLine($"{efficiencyRating}");
        Console.ResetColor();

        // Budget compliance indicator: Green for within budget, Red for overspent
        // Provides at-a-glance visual confirmation of financial compliance
        Console.Write("Stayed Within Budget: ");
        if (underBudget)
        {
            Console.ForegroundColor = ConsoleColor.Green;
            Console.WriteLine("Yes");
        }
        else
        {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine("No");
        }
        Console.ResetColor();

        Console.ForegroundColor = ConsoleColor.Cyan;
        Console.WriteLine("========================================");
        Console.ResetColor();
    }
}
